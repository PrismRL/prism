<!DOCTYPE html>

<html lang="en" data-content_root="../../../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />
<template id="tmpl_gotoTop"><div id="gotoTop">
  <button>Back to top</button>
</div></template>
    <title>Level &#8212; Prism  documentation</title>
    <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css?v=266695fe" />
    <link rel="stylesheet" type="text/css" href="../../../_static/basic.css?v=b08954a9" />
    <link rel="stylesheet" type="text/css" href="../../../_static/alabaster.css?v=27fed22d" />
    <link rel="stylesheet" type="text/css" href="../../../_static/lua.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../../../_static/terminal.css?v=0b47358f" />
    <link rel="stylesheet" type="text/css" href="../../../_static/goto-top/style.css?v=c152bd81" />
    <script src="../../../_static/documentation_options.js?v=5929fcd5"></script>
    <script src="../../../_static/doctools.js?v=9bcbadda"></script>
    <script src="../../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../../../_static/copybutton.js?v=f281be69"></script>
    <script src="../../../_static/goto-top/main.js?v=69fc67a6"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="Map" href="map.html" />
    <link rel="prev" title="Entity" href="entity.html" />
   
  <link rel="stylesheet" href="../../../_static/custom.css" type="text/css" />
  

  
  

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <dl class="lua class">
<dt class="sig sig-object lua" id="lua-Level">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">Level</span></span><span class="w"> </span><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="object.html#lua-Object" title="Object"><code class="xref lua lua-obj docutils literal notranslate"><span class="pre">Object</span></code></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference internal" href="../../spectrum/display.html#lua-SpectrumAttachable" title="SpectrumAttachable"><code class="xref lua lua-obj docutils literal notranslate"><span class="pre">SpectrumAttachable</span></code></a><a class="headerlink" href="#lua-Level" title="Link to this definition">¶</a></dt>
<dd><p>The ‘Level’ holds all of the actors and systems, and runs the game loop. Through the ActorStorage and SystemManager</p>
<dl class="lua data">
<dt class="sig sig-object lua" id="lua-Level.systemManager">
<span class="sig-name descname"><span class="pre">systemManager</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="system_manager.html#lua-SystemManager" title="SystemManager"><code class="xref lua lua-obj docutils literal notranslate"><span class="pre">SystemManager</span></code></a><a class="headerlink" href="#lua-Level.systemManager" title="Link to this definition">¶</a></dt>
<dd><p>A table containing all of the systems active in the level, set in the constructor.</p>
</dd></dl>

<dl class="lua data">
<dt class="sig sig-object lua" id="lua-Level.actorStorage">
<span class="sig-name descname"><span class="pre">actorStorage</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="actorstorage.html#lua-ActorStorage" title="ActorStorage"><code class="xref lua lua-obj docutils literal notranslate"><span class="pre">ActorStorage</span></code></a><a class="headerlink" href="#lua-Level.actorStorage" title="Link to this definition">¶</a></dt>
<dd><p>The main actor storage containing all of the level’s actors.</p>
</dd></dl>

<dl class="lua data">
<dt class="sig sig-object lua" id="lua-Level.scheduler">
<span class="sig-name descname"><span class="pre">scheduler</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="scheduler/scheduler.html#lua-Scheduler" title="Scheduler"><code class="xref lua lua-obj docutils literal notranslate"><span class="pre">Scheduler</span></code></a><a class="headerlink" href="#lua-Level.scheduler" title="Link to this definition">¶</a></dt>
<dd><p>The main scheduler driving the loop of the game.</p>
</dd></dl>

<dl class="lua data">
<dt class="sig sig-object lua" id="lua-Level.map">
<span class="sig-name descname"><span class="pre">map</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="map.html#lua-Map" title="Map"><code class="xref lua lua-obj docutils literal notranslate"><span class="pre">Map</span></code></a><a class="headerlink" href="#lua-Level.map" title="Link to this definition">¶</a></dt>
<dd><p>The level’s map.</p>
</dd></dl>

<dl class="lua data">
<dt class="sig sig-object lua" id="lua-Level.opacityCache">
<span class="sig-name descname"><span class="pre">opacityCache</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="../structures/booleanbuffer.html#lua-BooleanBuffer" title="BooleanBuffer"><code class="xref lua lua-obj docutils literal notranslate"><span class="pre">BooleanBuffer</span></code></a><a class="headerlink" href="#lua-Level.opacityCache" title="Link to this definition">¶</a></dt>
<dd><p>A cache of cell opacity || actor opacity for each cell. Used to speed up fov/lighting calculations.</p>
</dd></dl>

<dl class="lua data">
<dt class="sig sig-object lua" id="lua-Level.passableCache">
<span class="sig-name descname"><span class="pre">passableCache</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="../structures/bitmaskbuffer.html#lua-BitmaskBuffer" title="BitmaskBuffer"><code class="xref lua lua-obj docutils literal notranslate"><span class="pre">BitmaskBuffer</span></code></a><a class="headerlink" href="#lua-Level.passableCache" title="Link to this definition">¶</a></dt>
<dd><p>A cache of cell passability || actor passability for each cell. Used to speed up pathfinding.</p>
</dd></dl>

<dl class="lua data">
<dt class="sig sig-object lua" id="lua-Level.decision">
<span class="sig-name descname"><span class="pre">decision</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="decisions/actiondecision.html#lua-ActionDecision" title="ActionDecision"><code class="xref lua lua-obj docutils literal notranslate"><span class="pre">ActionDecision</span></code></a><a class="headerlink" href="#lua-Level.decision" title="Link to this definition">¶</a></dt>
<dd><p>Used during deserialization to resume.</p>
</dd></dl>

<dl class="lua data">
<dt class="sig sig-object lua" id="lua-Level.RNG">
<span class="sig-name descname"><span class="pre">RNG</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="#lua-Level.RNG" title="Level.RNG"><code class="xref lua lua-obj docutils literal notranslate"><span class="pre">RNG</span></code></a><a class="headerlink" href="#lua-Level.RNG" title="Link to this definition">¶</a></dt>
<dd><p>The level’s local random number generator, use this for randomness within the level like attack rolls.</p>
</dd></dl>

<dl class="lua method">
<dt class="sig sig-object lua" id="lua-Level.__new">
<span class="sig-name descname"><span class="pre">__new</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="#lua-Level" title="Level"><code class="xref lua lua-obj docutils literal notranslate"><span class="pre">Level</span></code></a></em>, <em class="sig-param"><span class="n"><span class="pre">map</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="map.html#lua-Map" title="Map"><code class="xref lua lua-obj docutils literal notranslate"><span class="pre">Map</span></code></a></em>, <em class="sig-param"><span class="n"><span class="pre">actors</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="actor.html#lua-Actor" title="Actor"><code class="xref lua lua-obj docutils literal notranslate"><span class="pre">Actor</span></code></a><span class="p"><span class="pre">[]</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">systems</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="system.html#lua-System" title="System"><code class="xref lua lua-obj docutils literal notranslate"><span class="pre">System</span></code></a><span class="p"><span class="pre">[]</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">scheduler?</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="scheduler/scheduler.html#lua-Scheduler" title="Scheduler"><code class="xref lua lua-obj docutils literal notranslate"><span class="pre">Scheduler</span></code></a></em>, <em class="sig-param"><span class="n"><span class="pre">seed?</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><code class="xref lua lua-obj docutils literal notranslate"><span class="pre">string</span></code></em><span class="sig-paren">)</span><a class="headerlink" href="#lua-Level.__new" title="Link to this definition">¶</a></dt>
<dd><p>Constructor for the Level class.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>map</strong> (<a class="reference internal" href="map.html#lua-Map" title="Map"><code class="xref lua lua-obj docutils literal notranslate"><span class="pre">Map</span></code></a>) – The map to use for the level.</p></li>
<li><p><strong>actors</strong> (<a class="reference internal" href="actor.html#lua-Actor" title="Actor"><code class="xref lua lua-obj docutils literal notranslate"><span class="pre">Actor</span></code></a><span class="p">[]</span>) – A list of actors to populate the level initially.</p></li>
<li><p><strong>systems</strong> (<a class="reference internal" href="system.html#lua-System" title="System"><code class="xref lua lua-obj docutils literal notranslate"><span class="pre">System</span></code></a><span class="p">[]</span>) – A list of systems to register with the level.</p></li>
<li><p><strong>scheduler?</strong> (<a class="reference internal" href="scheduler/scheduler.html#lua-Scheduler" title="Scheduler"><code class="xref lua lua-obj docutils literal notranslate"><span class="pre">Scheduler</span></code></a>) – The ‘abstract class’ that Schedulers should inherit from and implement.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="lua method">
<dt class="sig sig-object lua" id="lua-Level.initialize">
<span class="sig-name descname"><span class="pre">initialize</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="#lua-Level" title="Level"><code class="xref lua lua-obj docutils literal notranslate"><span class="pre">Level</span></code></a></em>, <em class="sig-param"><span class="n"><span class="pre">actors</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="actor.html#lua-Actor" title="Actor"><code class="xref lua lua-obj docutils literal notranslate"><span class="pre">Actor</span></code></a><span class="p"><span class="pre">[]</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">systems</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="system.html#lua-System" title="System"><code class="xref lua lua-obj docutils literal notranslate"><span class="pre">System</span></code></a><span class="p"><span class="pre">[]</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#lua-Level.initialize" title="Link to this definition">¶</a></dt>
<dd><dl class="field-list simple">
</dl>
</dd></dl>

<dl class="lua method">
<dt class="sig sig-object lua" id="lua-Level.run">
<span class="sig-name descname"><span class="pre">run</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="#lua-Level" title="Level"><code class="xref lua lua-obj docutils literal notranslate"><span class="pre">Level</span></code></a></em><span class="sig-paren">)</span><a class="headerlink" href="#lua-Level.run" title="Link to this definition">¶</a></dt>
<dd><p>Initializes the level,
Update is the main game loop for a level. It’s a coroutine that yields
back to the main thread when it needs to wait for input from the player.
This function is the heart of the game loop.</p>
<dl class="field-list simple">
</dl>
</dd></dl>

<dl class="lua method">
<dt class="sig sig-object lua" id="lua-Level.step">
<span class="sig-name descname"><span class="pre">step</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="#lua-Level" title="Level"><code class="xref lua lua-obj docutils literal notranslate"><span class="pre">Level</span></code></a></em><span class="sig-paren">)</span><a class="headerlink" href="#lua-Level.step" title="Link to this definition">¶</a></dt>
<dd><dl class="field-list simple">
</dl>
</dd></dl>

<dl class="lua method">
<dt class="sig sig-object lua" id="lua-Level.yield">
<span class="sig-name descname"><span class="pre">yield</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="#lua-Level" title="Level"><code class="xref lua lua-obj docutils literal notranslate"><span class="pre">Level</span></code></a></em>, <em class="sig-param"><span class="n"><span class="pre">message</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="message.html#lua-Message" title="Message"><code class="xref lua lua-obj docutils literal notranslate"><span class="pre">Message</span></code></a></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="decision.html#lua-Decision" title="Decision"><code class="xref lua lua-obj docutils literal notranslate"><span class="pre">Decision</span></code></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><code class="xref lua lua-obj docutils literal notranslate"><span class="pre">nil</span></code></span></span><a class="headerlink" href="#lua-Level.yield" title="Link to this definition">¶</a></dt>
<dd><p>Yields to the main ‘thread’, a coroutine in this case. This is called in run, and a few systems. Any time you want
the interface to update you should call this. Avoid calling coroutine.yield directly,
as this function will call the onYield method on all systems.</p>
<dl class="field-list simple">
</dl>
</dd></dl>

<dl class="lua method">
<dt class="sig sig-object lua" id="lua-Level.debugYield">
<span class="sig-name descname"><span class="pre">debugYield</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="#lua-Level" title="Level"><code class="xref lua lua-obj docutils literal notranslate"><span class="pre">Level</span></code></a></em>, <em class="sig-param"><span class="n"><span class="pre">stringMessage</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><code class="xref lua lua-obj docutils literal notranslate"><span class="pre">any</span></code></em><span class="sig-paren">)</span><a class="headerlink" href="#lua-Level.debugYield" title="Link to this definition">¶</a></dt>
<dd><dl class="field-list simple">
</dl>
</dd></dl>

<dl class="lua method">
<dt class="sig sig-object lua" id="lua-Level.trigger">
<span class="sig-name descname"><span class="pre">trigger</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="#lua-Level" title="Level"><code class="xref lua lua-obj docutils literal notranslate"><span class="pre">Level</span></code></a></em>, <em class="sig-param"><span class="n"><span class="pre">eventName</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><code class="xref lua lua-obj docutils literal notranslate"><span class="pre">any</span></code></em>, <em class="sig-param"><span class="n"><span class="pre">...</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><code class="xref lua lua-obj docutils literal notranslate"><span class="pre">unknown</span></code></em><span class="sig-paren">)</span><a class="headerlink" href="#lua-Level.trigger" title="Link to this definition">¶</a></dt>
<dd><dl class="field-list simple">
</dl>
</dd></dl>

<dl class="lua method">
<dt class="sig sig-object lua" id="lua-Level.addSystem">
<span class="sig-name descname"><span class="pre">addSystem</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="#lua-Level" title="Level"><code class="xref lua lua-obj docutils literal notranslate"><span class="pre">Level</span></code></a></em>, <em class="sig-param"><span class="n"><span class="pre">system</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="system.html#lua-System" title="System"><code class="xref lua lua-obj docutils literal notranslate"><span class="pre">System</span></code></a></em><span class="sig-paren">)</span><a class="headerlink" href="#lua-Level.addSystem" title="Link to this definition">¶</a></dt>
<dd><p>Attaches a system to the level. This function will error if the system
doesn’t have a name or if a system with the same name already exists, or if
the system has a requirement that hasn’t been attached yet.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>system</strong> (<a class="reference internal" href="system.html#lua-System" title="System"><code class="xref lua lua-obj docutils literal notranslate"><span class="pre">System</span></code></a>) – The system to add.</p>
</dd>
</dl>
</dd></dl>

<dl class="lua method">
<dt class="sig sig-object lua" id="lua-Level.getSystem">
<span class="sig-name descname"><span class="pre">getSystem</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="#lua-Level" title="Level"><code class="xref lua lua-obj docutils literal notranslate"><span class="pre">Level</span></code></a></em>, <em class="sig-param"><span class="n"><span class="pre">className</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><code class="xref lua lua-obj docutils literal notranslate"><span class="pre">string</span></code></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="n"><span class="pre">system?</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="system.html#lua-System" title="System"><code class="xref lua lua-obj docutils literal notranslate"><span class="pre">System</span></code></a></span></span><a class="headerlink" href="#lua-Level.getSystem" title="Link to this definition">¶</a></dt>
<dd><p>Gets a system by name.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>className</strong> (<code class="xref lua lua-obj docutils literal notranslate"><span class="pre">string</span></code>) – The name of the system to get.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>system?</strong> (<a class="reference internal" href="system.html#lua-System" title="System"><code class="xref lua lua-obj docutils literal notranslate"><span class="pre">System</span></code></a>) – The system with the given name.</p>
</dd>
</dl>
</dd></dl>

<dl class="lua method">
<dt class="sig sig-object lua" id="lua-Level.getID">
<span class="sig-name descname"><span class="pre">getID</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="#lua-Level" title="Level"><code class="xref lua lua-obj docutils literal notranslate"><span class="pre">Level</span></code></a></em>, <em class="sig-param"><span class="n"><span class="pre">actor</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="actor.html#lua-Actor" title="Actor"><code class="xref lua lua-obj docutils literal notranslate"><span class="pre">Actor</span></code></a></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="n"><span class="pre">The?</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><code class="xref lua lua-obj docutils literal notranslate"><span class="pre">integer</span></code></span></span><a class="headerlink" href="#lua-Level.getID" title="Link to this definition">¶</a></dt>
<dd><p>Retrieves the unique ID associated with the specified actor.
Note: IDs are unique to actors within the Level but may be reused 
when indices are freed.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>actor</strong> (<a class="reference internal" href="actor.html#lua-Actor" title="Actor"><code class="xref lua lua-obj docutils literal notranslate"><span class="pre">Actor</span></code></a>) – The actor whose ID is to be retrieved.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>The?</strong> (<code class="xref lua lua-obj docutils literal notranslate"><span class="pre">integer</span></code>) – unique ID of the actor, or nil if the actor is not found.</p>
</dd>
</dl>
</dd></dl>

<dl class="lua method">
<dt class="sig sig-object lua" id="lua-Level.moveActor">
<span class="sig-name descname"><span class="pre">moveActor</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="#lua-Level" title="Level"><code class="xref lua lua-obj docutils literal notranslate"><span class="pre">Level</span></code></a></em>, <em class="sig-param"><span class="n"><span class="pre">actor</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="actor.html#lua-Actor" title="Actor"><code class="xref lua lua-obj docutils literal notranslate"><span class="pre">Actor</span></code></a></em>, <em class="sig-param"><span class="n"><span class="pre">pos</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="../math/vector.html#lua-Vector2" title="Vector2"><code class="xref lua lua-obj docutils literal notranslate"><span class="pre">Vector2</span></code></a></em>, <em class="sig-param"><span class="n"><span class="pre">skipSparseMap?</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><code class="xref lua lua-obj docutils literal notranslate"><span class="pre">boolean</span></code></em><span class="sig-paren">)</span><a class="headerlink" href="#lua-Level.moveActor" title="Link to this definition">¶</a></dt>
<dd><p>Moves an actor to the given position. This function doesn’t do any checking
for overlaps or collisions. It’s used by the moveActorChecked function, you should
generally not invoke this yourself using moveActorChecked instead.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>actor</strong> (<a class="reference internal" href="actor.html#lua-Actor" title="Actor"><code class="xref lua lua-obj docutils literal notranslate"><span class="pre">Actor</span></code></a>) – The actor to move.</p></li>
<li><p><strong>pos</strong> (<a class="reference internal" href="../math/vector.html#lua-Vector2" title="Vector2"><code class="xref lua lua-obj docutils literal notranslate"><span class="pre">Vector2</span></code></a>) – The position to move the actor to.</p></li>
<li><p><strong>skipSparseMap?</strong> (<code class="xref lua lua-obj docutils literal notranslate"><span class="pre">boolean</span></code>) – If true the sparse map won’t be updated.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="lua method">
<dt class="sig sig-object lua" id="lua-Level.performAction">
<span class="sig-name descname"><span class="pre">performAction</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="#lua-Level" title="Level"><code class="xref lua lua-obj docutils literal notranslate"><span class="pre">Level</span></code></a></em>, <em class="sig-param"><span class="n"><span class="pre">action</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="action.html#lua-Action" title="Action"><code class="xref lua lua-obj docutils literal notranslate"><span class="pre">Action</span></code></a></em>, <em class="sig-param"><span class="n"><span class="pre">silent?</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><code class="xref lua lua-obj docutils literal notranslate"><span class="pre">boolean</span></code></em><span class="sig-paren">)</span><a class="headerlink" href="#lua-Level.performAction" title="Link to this definition">¶</a></dt>
<dd><p>Executes an Action, updating the level’s state and triggering any events through the systems
attached to the Actor or Level respectively. It also updates the ‘Scheduler’ if the action isn’t
a reaction or free action. Lastly, it calls the ‘onAction’ method on the ‘Cell’ that the ‘Actor’ is
standing on.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>action</strong> (<a class="reference internal" href="action.html#lua-Action" title="Action"><code class="xref lua lua-obj docutils literal notranslate"><span class="pre">Action</span></code></a>) – The action to perform.</p></li>
<li><p><strong>silent?</strong> (<code class="xref lua lua-obj docutils literal notranslate"><span class="pre">boolean</span></code>) – If true this action emits no events.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="lua method">
<dt class="sig sig-object lua" id="lua-Level.getActorController">
<span class="sig-name descname"><span class="pre">getActorController</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="#lua-Level" title="Level"><code class="xref lua lua-obj docutils literal notranslate"><span class="pre">Level</span></code></a></em>, <em class="sig-param"><span class="n"><span class="pre">actor</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="actor.html#lua-Actor" title="Actor"><code class="xref lua lua-obj docutils literal notranslate"><span class="pre">Actor</span></code></a></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="n"><span class="pre">controller</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="components/controller.html#lua-ControllerComponent" title="ControllerComponent"><code class="xref lua lua-obj docutils literal notranslate"><span class="pre">ControllerComponent</span></code></a></span></span><a class="headerlink" href="#lua-Level.getActorController" title="Link to this definition">¶</a></dt>
<dd><p>Gets the actor’s controller. This is a utility function that checks the
actor’s conditions for an override controller and returns it if it exists.
Otherwise it returns the actor’s normal controller.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>actor</strong> (<a class="reference internal" href="actor.html#lua-Actor" title="Actor"><code class="xref lua lua-obj docutils literal notranslate"><span class="pre">Actor</span></code></a>) – The actor to get the controller for.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>controller</strong> (<a class="reference internal" href="components/controller.html#lua-ControllerComponent" title="ControllerComponent"><code class="xref lua lua-obj docutils literal notranslate"><span class="pre">ControllerComponent</span></code></a>) – The actor’s controller.</p>
</dd>
</dl>
</dd></dl>

<dl class="lua method">
<dt class="sig sig-object lua" id="lua-Level.hasActor">
<span class="sig-name descname"><span class="pre">hasActor</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="#lua-Level" title="Level"><code class="xref lua lua-obj docutils literal notranslate"><span class="pre">Level</span></code></a></em>, <em class="sig-param"><span class="n"><span class="pre">actor</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="actor.html#lua-Actor" title="Actor"><code class="xref lua lua-obj docutils literal notranslate"><span class="pre">Actor</span></code></a></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="n"><span class="pre">hasActor</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><code class="xref lua lua-obj docutils literal notranslate"><span class="pre">boolean</span></code></span></span><a class="headerlink" href="#lua-Level.hasActor" title="Link to this definition">¶</a></dt>
<dd><p>Returns true if the level contains the given actor, false otherwise. A thin wrapper
over the inner ActorStorage.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>actor</strong> (<a class="reference internal" href="actor.html#lua-Actor" title="Actor"><code class="xref lua lua-obj docutils literal notranslate"><span class="pre">Actor</span></code></a>) – The actor to check for.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>hasActor</strong> (<code class="xref lua lua-obj docutils literal notranslate"><span class="pre">boolean</span></code>) – True if the level contains the given actor, false otherwise.</p>
</dd>
</dl>
</dd></dl>

<dl class="lua method">
<dt class="sig sig-object lua" id="lua-Level.getActorByType">
<span class="sig-name descname"><span class="pre">getActorByType</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="#lua-Level" title="Level"><code class="xref lua lua-obj docutils literal notranslate"><span class="pre">Level</span></code></a></em>, <em class="sig-param"><span class="n"><span class="pre">prototype</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="actor.html#lua-Actor" title="Actor"><code class="xref lua lua-obj docutils literal notranslate"><span class="pre">Actor</span></code></a></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="n"><span class="pre">The</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="actor.html#lua-Actor" title="Actor"><code class="xref lua lua-obj docutils literal notranslate"><span class="pre">Actor</span></code></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><code class="xref lua lua-obj docutils literal notranslate"><span class="pre">nil</span></code></span></span><a class="headerlink" href="#lua-Level.getActorByType" title="Link to this definition">¶</a></dt>
<dd><p>Returns the first actor that extends the given prototype, or nil if no actor
is found. Useful for one offs like stairs in some games.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>prototype</strong> (<a class="reference internal" href="actor.html#lua-Actor" title="Actor"><code class="xref lua lua-obj docutils literal notranslate"><span class="pre">Actor</span></code></a>) – The prototype to check for.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>The</strong> (<a class="reference internal" href="actor.html#lua-Actor" title="Actor"><code class="xref lua lua-obj docutils literal notranslate"><span class="pre">Actor</span></code></a><span class="w"> </span><span class="p">|</span><span class="w"> </span><code class="xref lua lua-obj docutils literal notranslate"><span class="pre">nil</span></code>) – first actor that extends the given prototype, or nil if no actor is found.</p>
</dd>
</dl>
</dd></dl>

<dl class="lua method">
<dt class="sig sig-object lua" id="lua-Level.computeFOV">
<span class="sig-name descname"><span class="pre">computeFOV</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="#lua-Level" title="Level"><code class="xref lua lua-obj docutils literal notranslate"><span class="pre">Level</span></code></a></em>, <em class="sig-param"><span class="n"><span class="pre">origin</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><code class="xref lua lua-obj docutils literal notranslate"><span class="pre">any</span></code></em>, <em class="sig-param"><span class="n"><span class="pre">maxDepth</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><code class="xref lua lua-obj docutils literal notranslate"><span class="pre">any</span></code></em>, <em class="sig-param"><span class="n"><span class="pre">callback</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><code class="xref lua lua-obj docutils literal notranslate"><span class="pre">any</span></code></em><span class="sig-paren">)</span><a class="headerlink" href="#lua-Level.computeFOV" title="Link to this definition">¶</a></dt>
<dd><dl class="field-list simple">
</dl>
</dd></dl>

<dl class="lua method">
<dt class="sig sig-object lua" id="lua-Level.updateCaches">
<span class="sig-name descname"><span class="pre">updateCaches</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="#lua-Level" title="Level"><code class="xref lua lua-obj docutils literal notranslate"><span class="pre">Level</span></code></a></em>, <em class="sig-param"><span class="n"><span class="pre">x</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><code class="xref lua lua-obj docutils literal notranslate"><span class="pre">any</span></code></em>, <em class="sig-param"><span class="n"><span class="pre">y</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><code class="xref lua lua-obj docutils literal notranslate"><span class="pre">any</span></code></em><span class="sig-paren">)</span><a class="headerlink" href="#lua-Level.updateCaches" title="Link to this definition">¶</a></dt>
<dd><dl class="field-list simple">
</dl>
</dd></dl>

<dl class="lua method">
<dt class="sig sig-object lua" id="lua-Level.getCellPassable">
<span class="sig-name descname"><span class="pre">getCellPassable</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="#lua-Level" title="Level"><code class="xref lua lua-obj docutils literal notranslate"><span class="pre">Level</span></code></a></em>, <em class="sig-param"><span class="n"><span class="pre">x</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><code class="xref lua lua-obj docutils literal notranslate"><span class="pre">number</span></code></em>, <em class="sig-param"><span class="n"><span class="pre">y</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><code class="xref lua lua-obj docutils literal notranslate"><span class="pre">number</span></code></em>, <em class="sig-param"><span class="n"><span class="pre">mask</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><code class="xref lua lua-obj docutils literal notranslate"><span class="pre">integer</span></code></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><code class="xref lua lua-obj docutils literal notranslate"><span class="pre">boolean</span></code></span></span><a class="headerlink" href="#lua-Level.getCellPassable" title="Link to this definition">¶</a></dt>
<dd><p>Returns true if the cell at the given position is passable, false otherwise. Considers
actors in the sparse map as well as the cell’s passable property.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>x</strong> (<code class="xref lua lua-obj docutils literal notranslate"><span class="pre">number</span></code>) – The x component of the position to check.</p></li>
<li><p><strong>y</strong> (<code class="xref lua lua-obj docutils literal notranslate"><span class="pre">number</span></code>) – The y component of the position to check.</p></li>
<li><p><strong>mask</strong> (<code class="xref lua lua-obj docutils literal notranslate"><span class="pre">integer</span></code>) – The collision mask for checking passability.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>_1</strong> (<code class="xref lua lua-obj docutils literal notranslate"><span class="pre">boolean</span></code>) – True if the cell is passable, false otherwise.</p>
</dd>
</dl>
</dd></dl>

<dl class="lua method">
<dt class="sig sig-object lua" id="lua-Level.initializePassabilityCache">
<span class="sig-name descname"><span class="pre">initializePassabilityCache</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="#lua-Level" title="Level"><code class="xref lua lua-obj docutils literal notranslate"><span class="pre">Level</span></code></a></em><span class="sig-paren">)</span><a class="headerlink" href="#lua-Level.initializePassabilityCache" title="Link to this definition">¶</a></dt>
<dd><p>Initialize the passable cache. This should be called after the level is
created and before the game loop starts. It will initialize the passable
cache with the cell passable cache. This is handled automatically by the
Level class.</p>
<dl class="field-list simple">
</dl>
</dd></dl>

<dl class="lua method">
<dt class="sig sig-object lua" id="lua-Level.updatePassabilityCache">
<span class="sig-name descname"><span class="pre">updatePassabilityCache</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="#lua-Level" title="Level"><code class="xref lua lua-obj docutils literal notranslate"><span class="pre">Level</span></code></a></em>, <em class="sig-param"><span class="n"><span class="pre">x</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><code class="xref lua lua-obj docutils literal notranslate"><span class="pre">number</span></code></em>, <em class="sig-param"><span class="n"><span class="pre">y</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><code class="xref lua lua-obj docutils literal notranslate"><span class="pre">number</span></code></em><span class="sig-paren">)</span><a class="headerlink" href="#lua-Level.updatePassabilityCache" title="Link to this definition">¶</a></dt>
<dd><p>Updates the passability cache at the given position. This should be called
whenever an actor moves or a cell’s passability changes. This is handled
automatically by the Level class.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>x</strong> (<code class="xref lua lua-obj docutils literal notranslate"><span class="pre">number</span></code>) – The x component of the position to update.</p></li>
<li><p><strong>y</strong> (<code class="xref lua lua-obj docutils literal notranslate"><span class="pre">number</span></code>) – The y component of the position to update.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="lua method">
<dt class="sig sig-object lua" id="lua-Level.getCellOpaque">
<span class="sig-name descname"><span class="pre">getCellOpaque</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="#lua-Level" title="Level"><code class="xref lua lua-obj docutils literal notranslate"><span class="pre">Level</span></code></a></em>, <em class="sig-param"><span class="n"><span class="pre">x</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><code class="xref lua lua-obj docutils literal notranslate"><span class="pre">number</span></code></em>, <em class="sig-param"><span class="n"><span class="pre">y</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><code class="xref lua lua-obj docutils literal notranslate"><span class="pre">number</span></code></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><code class="xref lua lua-obj docutils literal notranslate"><span class="pre">boolean</span></code></span></span><a class="headerlink" href="#lua-Level.getCellOpaque" title="Link to this definition">¶</a></dt>
<dd><p>Returns true if the cell at the given position is opaque, false otherwise.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>x</strong> (<code class="xref lua lua-obj docutils literal notranslate"><span class="pre">number</span></code>) – The x component of the position to check.</p></li>
<li><p><strong>y</strong> (<code class="xref lua lua-obj docutils literal notranslate"><span class="pre">number</span></code>) – The y component of the position to check.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>_1</strong> (<code class="xref lua lua-obj docutils literal notranslate"><span class="pre">boolean</span></code>) – True if the cell is opaque, false otherwise.</p>
</dd>
</dl>
</dd></dl>

<dl class="lua method">
<dt class="sig sig-object lua" id="lua-Level.getOpacityCache">
<span class="sig-name descname"><span class="pre">getOpacityCache</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="#lua-Level" title="Level"><code class="xref lua lua-obj docutils literal notranslate"><span class="pre">Level</span></code></a></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="n"><span class="pre">map</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="../structures/booleanbuffer.html#lua-BooleanBuffer" title="BooleanBuffer"><code class="xref lua lua-obj docutils literal notranslate"><span class="pre">BooleanBuffer</span></code></a></span></span><a class="headerlink" href="#lua-Level.getOpacityCache" title="Link to this definition">¶</a></dt>
<dd><p>Returns the opacity cache for the level. This generally shouldn’t be used
outside of systems that need to know about opacity.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>map</strong> (<a class="reference internal" href="../structures/booleanbuffer.html#lua-BooleanBuffer" title="BooleanBuffer"><code class="xref lua lua-obj docutils literal notranslate"><span class="pre">BooleanBuffer</span></code></a>) – The opacity cache for the level.</p>
</dd>
</dl>
</dd></dl>

<dl class="lua method">
<dt class="sig sig-object lua" id="lua-Level.initializeOpacityCache">
<span class="sig-name descname"><span class="pre">initializeOpacityCache</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="#lua-Level" title="Level"><code class="xref lua lua-obj docutils literal notranslate"><span class="pre">Level</span></code></a></em><span class="sig-paren">)</span><a class="headerlink" href="#lua-Level.initializeOpacityCache" title="Link to this definition">¶</a></dt>
<dd><p>Initialize the opacity cache. This should be called after the level is
created and before the game loop starts. It will initialize the opacity
cache with the cell opacity cache. This is handled automatically by the
Level class.</p>
<dl class="field-list simple">
</dl>
</dd></dl>

<dl class="lua method">
<dt class="sig sig-object lua" id="lua-Level.updateOpacityCache">
<span class="sig-name descname"><span class="pre">updateOpacityCache</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="#lua-Level" title="Level"><code class="xref lua lua-obj docutils literal notranslate"><span class="pre">Level</span></code></a></em>, <em class="sig-param"><span class="n"><span class="pre">x</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><code class="xref lua lua-obj docutils literal notranslate"><span class="pre">number</span></code></em>, <em class="sig-param"><span class="n"><span class="pre">y</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><code class="xref lua lua-obj docutils literal notranslate"><span class="pre">number</span></code></em><span class="sig-paren">)</span><a class="headerlink" href="#lua-Level.updateOpacityCache" title="Link to this definition">¶</a></dt>
<dd><p>Updates the opacity cache at the given position. This should be called
whenever an actor moves or a cell’s opacity changes. This is handled
automatically by the Level class.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>x</strong> (<code class="xref lua lua-obj docutils literal notranslate"><span class="pre">number</span></code>) – The x component of the position to update.</p></li>
<li><p><strong>y</strong> (<code class="xref lua lua-obj docutils literal notranslate"><span class="pre">number</span></code>) – The y component of the position to update.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="lua method">
<dt class="sig sig-object lua" id="lua-Level.findPath">
<span class="sig-name descname"><span class="pre">findPath</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="#lua-Level" title="Level"><code class="xref lua lua-obj docutils literal notranslate"><span class="pre">Level</span></code></a></em>, <em class="sig-param"><span class="n"><span class="pre">startPos</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="../math/vector.html#lua-Vector2" title="Vector2"><code class="xref lua lua-obj docutils literal notranslate"><span class="pre">Vector2</span></code></a></em>, <em class="sig-param"><span class="n"><span class="pre">goalPos</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="../math/vector.html#lua-Vector2" title="Vector2"><code class="xref lua lua-obj docutils literal notranslate"><span class="pre">Vector2</span></code></a></em>, <em class="sig-param"><span class="n"><span class="pre">minDistance</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><code class="xref lua lua-obj docutils literal notranslate"><span class="pre">integer</span></code></em>, <em class="sig-param"><span class="n"><span class="pre">mask</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><code class="xref lua lua-obj docutils literal notranslate"><span class="pre">integer</span></code></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="../algorithms/astar/path.html#lua-Path" title="Path"><code class="xref lua lua-obj docutils literal notranslate"><span class="pre">Path</span></code></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><code class="xref lua lua-obj docutils literal notranslate"><span class="pre">nil</span></code></span></span><a class="headerlink" href="#lua-Level.findPath" title="Link to this definition">¶</a></dt>
<dd><p>Finds a path between two positions.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>minDistance</strong> (<code class="xref lua lua-obj docutils literal notranslate"><span class="pre">integer</span></code>) – The minimum distance away to pathfind to.</p></li>
<li><p><strong>mask</strong> (<code class="xref lua lua-obj docutils literal notranslate"><span class="pre">integer</span></code>) – The collision mask to use for passability checks.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>_1</strong> (<a class="reference internal" href="../algorithms/astar/path.html#lua-Path" title="Path"><code class="xref lua lua-obj docutils literal notranslate"><span class="pre">Path</span></code></a><span class="w"> </span><span class="p">|</span><span class="w"> </span><code class="xref lua lua-obj docutils literal notranslate"><span class="pre">nil</span></code>) – The path, or nil if none is found.</p>
</dd>
</dl>
</dd></dl>

<dl class="lua method">
<dt class="sig sig-object lua" id="lua-Level.getAOE">
<span class="sig-name descname"><span class="pre">getAOE</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="#lua-Level" title="Level"><code class="xref lua lua-obj docutils literal notranslate"><span class="pre">Level</span></code></a></em>, <em class="sig-param"><span class="n"><span class="pre">type</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="s"><span class="pre">&quot;box&quot;</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="s"><span class="pre">&quot;fov&quot;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">position</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="../math/vector.html#lua-Vector2" title="Vector2"><code class="xref lua lua-obj docutils literal notranslate"><span class="pre">Vector2</span></code></a></em>, <em class="sig-param"><span class="n"><span class="pre">range</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><code class="xref lua lua-obj docutils literal notranslate"><span class="pre">number</span></code></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="n"><span class="pre">fov?</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="../structures/sparsegrid.html#lua-SparseGrid" title="SparseGrid"><code class="xref lua lua-obj docutils literal notranslate"><span class="pre">SparseGrid</span></code></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="n"><span class="pre">actors?</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="actor.html#lua-Actor" title="Actor"><code class="xref lua lua-obj docutils literal notranslate"><span class="pre">Actor</span></code></a><span class="p"><span class="pre">[]</span></span></span></span><a class="headerlink" href="#lua-Level.getAOE" title="Link to this definition">¶</a></dt>
<dd><p>Returns a list of all actors that are within the given range of the given
position. The type parameter determines the type of range to use. Currently
only “fov” and “box” are supported. The fov type uses a field of view
algorithm to determine what actors are visible from the given position. The
box type uses a simple box around the given position.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>type</strong> (<span class="s">&quot;box&quot;</span><span class="w"> </span><span class="p">|</span><span class="w"> </span><span class="s">&quot;fov&quot;</span>) – The type of range to use.</p></li>
<li><p><strong>position</strong> (<a class="reference internal" href="../math/vector.html#lua-Vector2" title="Vector2"><code class="xref lua lua-obj docutils literal notranslate"><span class="pre">Vector2</span></code></a>) – The position to check from.</p></li>
<li><p><strong>range</strong> (<code class="xref lua lua-obj docutils literal notranslate"><span class="pre">number</span></code>) – The range to check.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>actors?</strong> (<a class="reference internal" href="actor.html#lua-Actor" title="Actor"><code class="xref lua lua-obj docutils literal notranslate"><span class="pre">Actor</span></code></a><span class="p">[]</span>) – A list of actors within the given range.</p>
</dd>
</dl>
</dd></dl>

<dl class="lua method">
<dt class="sig sig-object lua" id="lua-Level.sparseMapCallback">
<span class="sig-name descname"><span class="pre">sparseMapCallback</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="#lua-Level" title="Level"><code class="xref lua lua-obj docutils literal notranslate"><span class="pre">Level</span></code></a></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><code class="xref lua lua-obj docutils literal notranslate"><span class="pre">function</span></code></span></span><a class="headerlink" href="#lua-Level.sparseMapCallback" title="Link to this definition">¶</a></dt>
<dd><dl class="field-list simple">
</dl>
</dd></dl>

<dl class="lua method">
<dt class="sig sig-object lua" id="lua-Level.onDeserialize">
<span class="sig-name descname"><span class="pre">onDeserialize</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="#lua-Level" title="Level"><code class="xref lua lua-obj docutils literal notranslate"><span class="pre">Level</span></code></a></em><span class="sig-paren">)</span><a class="headerlink" href="#lua-Level.onDeserialize" title="Link to this definition">¶</a></dt>
<dd><dl class="field-list simple">
</dl>
</dd></dl>

</dd></dl>



          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="Main">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../../../index.html">Prism</a></h1>






<p>
<iframe src="https://ghbtns.com/github-btn.html?user=prismrl&repo=prism&type=watch&count=true&size=large&v=2"
  allowtransparency="true" frameborder="0" scrolling="0" width="200px" height="35px"></iframe>
</p>






<search id="searchbox" style="display: none" role="search">
    <div class="searchformwrapper">
    <form class="search" action="../../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" placeholder="Search"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</search>
<script>document.getElementById('searchbox').style.display = "block"</script><h3>Navigation</h3>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../architecture-primer.html">Prism’s Architecture: A Primer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../quickstart.html">Quickstart</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">How-tos</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../how-tos/collision.html">Collision</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Making a roguelike</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../making-a-roguelike/part1.html">Getting started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../making-a-roguelike/part2.html">The clash of steel</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Reference</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Prism</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="action.html"><code class="docutils literal notranslate"><span class="pre">Action</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="actor.html"><code class="docutils literal notranslate"><span class="pre">Actor</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="actorstorage.html"><code class="docutils literal notranslate"><span class="pre">ActorStorage</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="behavior.html"><code class="docutils literal notranslate"><span class="pre">IBehavior</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="cell.html"><code class="docutils literal notranslate"><span class="pre">Cell</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="collision.html"><code class="docutils literal notranslate"><span class="pre">Collision</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="component.html"><code class="docutils literal notranslate"><span class="pre">Component</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="decision.html"><code class="docutils literal notranslate"><span class="pre">Decision</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="entity.html"><code class="docutils literal notranslate"><span class="pre">Entity</span></code></a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#"><code class="docutils literal notranslate"><span class="pre">Level</span></code></a><ul>
<li class="toctree-l3"><a class="reference internal" href="#lua-Level.systemManager"><code class="docutils literal notranslate"><span class="pre">systemManager</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lua-Level.actorStorage"><code class="docutils literal notranslate"><span class="pre">actorStorage</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lua-Level.scheduler"><code class="docutils literal notranslate"><span class="pre">scheduler</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lua-Level.map"><code class="docutils literal notranslate"><span class="pre">map</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lua-Level.opacityCache"><code class="docutils literal notranslate"><span class="pre">opacityCache</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lua-Level.passableCache"><code class="docutils literal notranslate"><span class="pre">passableCache</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lua-Level.decision"><code class="docutils literal notranslate"><span class="pre">decision</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lua-Level.RNG"><code class="docutils literal notranslate"><span class="pre">RNG</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lua-Level.__new"><code class="docutils literal notranslate"><span class="pre">__new()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lua-Level.initialize"><code class="docutils literal notranslate"><span class="pre">initialize()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lua-Level.run"><code class="docutils literal notranslate"><span class="pre">run()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lua-Level.step"><code class="docutils literal notranslate"><span class="pre">step()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lua-Level.yield"><code class="docutils literal notranslate"><span class="pre">yield()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lua-Level.debugYield"><code class="docutils literal notranslate"><span class="pre">debugYield()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lua-Level.trigger"><code class="docutils literal notranslate"><span class="pre">trigger()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lua-Level.addSystem"><code class="docutils literal notranslate"><span class="pre">addSystem()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lua-Level.getSystem"><code class="docutils literal notranslate"><span class="pre">getSystem()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lua-Level.getID"><code class="docutils literal notranslate"><span class="pre">getID()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lua-Level.moveActor"><code class="docutils literal notranslate"><span class="pre">moveActor()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lua-Level.performAction"><code class="docutils literal notranslate"><span class="pre">performAction()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lua-Level.getActorController"><code class="docutils literal notranslate"><span class="pre">getActorController()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lua-Level.hasActor"><code class="docutils literal notranslate"><span class="pre">hasActor()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lua-Level.getActorByType"><code class="docutils literal notranslate"><span class="pre">getActorByType()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lua-Level.computeFOV"><code class="docutils literal notranslate"><span class="pre">computeFOV()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lua-Level.updateCaches"><code class="docutils literal notranslate"><span class="pre">updateCaches()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lua-Level.getCellPassable"><code class="docutils literal notranslate"><span class="pre">getCellPassable()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lua-Level.initializePassabilityCache"><code class="docutils literal notranslate"><span class="pre">initializePassabilityCache()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lua-Level.updatePassabilityCache"><code class="docutils literal notranslate"><span class="pre">updatePassabilityCache()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lua-Level.getCellOpaque"><code class="docutils literal notranslate"><span class="pre">getCellOpaque()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lua-Level.getOpacityCache"><code class="docutils literal notranslate"><span class="pre">getOpacityCache()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lua-Level.initializeOpacityCache"><code class="docutils literal notranslate"><span class="pre">initializeOpacityCache()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lua-Level.updateOpacityCache"><code class="docutils literal notranslate"><span class="pre">updateOpacityCache()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lua-Level.findPath"><code class="docutils literal notranslate"><span class="pre">findPath()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lua-Level.getAOE"><code class="docutils literal notranslate"><span class="pre">getAOE()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lua-Level.sparseMapCallback"><code class="docutils literal notranslate"><span class="pre">sparseMapCallback()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lua-Level.onDeserialize"><code class="docutils literal notranslate"><span class="pre">onDeserialize()</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="map.html"><code class="docutils literal notranslate"><span class="pre">Map</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="map_builder.html"><code class="docutils literal notranslate"><span class="pre">MapBuilder</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="message.html"><code class="docutils literal notranslate"><span class="pre">Message</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="object.html"><code class="docutils literal notranslate"><span class="pre">Object</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="rng.html"><code class="docutils literal notranslate"><span class="pre">RNG</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="system.html"><code class="docutils literal notranslate"><span class="pre">System</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="system_manager.html"><code class="docutils literal notranslate"><span class="pre">SystemManager</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="target.html"><code class="docutils literal notranslate"><span class="pre">Target</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="components/collider.html"><code class="docutils literal notranslate"><span class="pre">ColliderComponent</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="components/collider.html#lua-ColliderOptions"><code class="docutils literal notranslate"><span class="pre">ColliderOptions</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="components/controller.html"><code class="docutils literal notranslate"><span class="pre">ControllerComponent</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="components/opaque.html"><code class="docutils literal notranslate"><span class="pre">OpaqueComponent</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="components/player_controller.html"><code class="docutils literal notranslate"><span class="pre">PlayerControllerComponent</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="components/senses.html"><code class="docutils literal notranslate"><span class="pre">SensesComponent</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="systems/senses.html"><code class="docutils literal notranslate"><span class="pre">SensesSystem</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="messages/actionmessage.html"><code class="docutils literal notranslate"><span class="pre">ActionMessage</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="messages/debugmessage.html"><code class="docutils literal notranslate"><span class="pre">DebugMessage</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="decisions/actiondecision.html"><code class="docutils literal notranslate"><span class="pre">ActionDecision</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="behavior_tree/btconditional.html"><code class="docutils literal notranslate"><span class="pre">BTConditional</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="behavior_tree/btnode.html"><code class="docutils literal notranslate"><span class="pre">BTNode</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="behavior_tree/btroot.html"><code class="docutils literal notranslate"><span class="pre">BTRoot</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="behavior_tree/btselector.html"><code class="docutils literal notranslate"><span class="pre">BTSelector</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="behavior_tree/btsequence.html"><code class="docutils literal notranslate"><span class="pre">BTSequence</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="behavior_tree/btsucceeder.html"><code class="docutils literal notranslate"><span class="pre">BTSucceeder</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../structures/bitmaskbuffer.html"><code class="docutils literal notranslate"><span class="pre">BitmaskBuffer</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../structures/booleanbuffer.html"><code class="docutils literal notranslate"><span class="pre">BooleanBuffer</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../structures/grid.html"><code class="docutils literal notranslate"><span class="pre">Grid</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../structures/priority_queue.html"><code class="docutils literal notranslate"><span class="pre">PriorityQueue</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../structures/queue.html"><code class="docutils literal notranslate"><span class="pre">Queue</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../structures/sparsearray.html"><code class="docutils literal notranslate"><span class="pre">SparseArray</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../structures/sparsegrid.html"><code class="docutils literal notranslate"><span class="pre">SparseGrid</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../structures/sparsemap.html"><code class="docutils literal notranslate"><span class="pre">SparseMap</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../math/bounding_box.html"><code class="docutils literal notranslate"><span class="pre">BoundingBox</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../math/color.html"><code class="docutils literal notranslate"><span class="pre">Color4</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../math/vector.html"><code class="docutils literal notranslate"><span class="pre">Vector2</span></code></a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../spectrum/index.html">Spectrum</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../../../index.html">Documentation overview</a><ul>
  <li><a href="../index.html">Prism</a><ul>
      <li>Previous: <a href="entity.html" title="previous chapter">Entity</a></li>
      <li>Next: <a href="map.html" title="next chapter">Map</a></li>
  </ul></li>
  </ul></li>
</ul>
</div>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &#169;2025, Matthew Blanchard, LJNIC.
      
      |
      Powered by <a href="https://www.sphinx-doc.org/">Sphinx 8.2.3</a>
      &amp; <a href="https://alabaster.readthedocs.io">Alabaster 1.0.0</a>
      
      |
      <a href="../../../_sources/reference/prism/core/level.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>